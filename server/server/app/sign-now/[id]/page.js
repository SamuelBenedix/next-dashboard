(()=>{var e={};e.id=651,e.ids=[651],e.modules={20:(e,t,r)=>{Promise.resolve().then(r.bind(r,57305))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57305:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/samuelbenedict/Documents/GitHub/next-dashboard/src/app/sign-now/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/samuelbenedict/Documents/GitHub/next-dashboard/src/app/sign-now/[id]/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},76052:(e,t,r)=>{Promise.resolve().then(r.bind(r,92807))},78088:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>l});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),o=r(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l={children:["",{children:["sign-now",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,57305)),"/Users/samuelbenedict/Documents/GitHub/next-dashboard/src/app/sign-now/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/samuelbenedict/Documents/GitHub/next-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/Users/samuelbenedict/Documents/GitHub/next-dashboard/src/app/sign-now/[id]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/sign-now/[id]/page",pathname:"/sign-now/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},92807:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(60687),a=r(43210),n=r(30036),i=r(89667),o=r(903),d=r(80013),l=r(70146),u=r(39941),c=r(77567),p=r(29523),m=r(16189),x=r(41862);r(45837),r(44719);let h=(0,n.default)(async()=>{},{loadableGenerated:{modules:["app/sign-now/[id]/page.tsx -> @/components/ui/PdfRenderer"]},ssr:!1});function g(){let e=(0,m.useRouter)(),{id:t}=(0,m.useParams)(),r=new u.x,[n,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(0),[v,j]=(0,a.useState)(0),[w,y]=(0,a.useState)(""),[S,k]=(0,a.useState)(""),[P,q]=(0,a.useState)(100),[N,C]=(0,a.useState)(100),[D,_]=(0,a.useState)(120),[A,G]=(0,a.useState)(80),[M,z]=(0,a.useState)(null),[R,E]=(0,a.useState)(!1),H=async s=>{if(!t||!(await c.A.fire({title:"Are you sure?",text:"sign"===s?"You are about to sign this document?":"You are about to reject this document?",icon:"warning",showCancelButton:!0,confirmButtonText:`Yes, ${s} it!`})).isConfirmed)return;let a=new FormData;M&&a.append("Document",M),a.append("idFile",t),a.append("reason",S),a.append("keterangan",w),a.append("IsDraft","false"),a.append("IsApprove","sign"===s?"true":"false"),"sign"===s&&(a.append("Xloc",Math.round(P).toString()),a.append("Yloc",Math.round(N).toString()),a.append("Size",(D-10).toString()),a.append("PageNumber",v.toString()),a.append("SendToNpp",""));try{E(!0);let t=await r.signCertified(a);c.A.fire("Validation Success",t.data.data.message,"success").then(()=>{e.push("/documents")})}catch(e){console.error("Error processing document:",e),c.A.fire("Error",`Failed to ${s} document`,"error")}finally{E(!1)}};return(0,s.jsxs)(l.e7,{breadcrumb:{parent:{name:"Dashboard"},current:"Dokumen"},createButtonText:"Create Document",isCreate:!0,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,s.jsx)("div",{className:"md:col-span-7 col-span-12 relative p-4 min-h-[calc(100vh-100px)] bg-gray-200",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex items-center mb-2",children:(0,s.jsx)("select",{className:"p-2 border rounded",onChange:e=>j(Number(e.target.value)),value:v,children:Array.from({length:f},(e,t)=>(0,s.jsxs)("option",{value:t+1,children:["Halaman ",t+1]},t))})}),(0,s.jsxs)("div",{className:"relative border",style:{width:"fit-content"},children:[(0,s.jsx)(h,{fileBuffer:n,currentPage:v,onLoad:b,onPageSize:()=>{},signatureURL:"",position:{x:P,y:N},sigSize:{w:D,h:A},onRenderScaleChange:()=>{}}),(0,s.jsx)(o.p,{bounds:"parent",default:{x:P,y:N,width:D,height:A},onDragStop:(e,t)=>{q(t.x),C(t.y)},onResizeStop:(e,t,r,s,a)=>{_(r.offsetWidth),G(r.offsetHeight),q(a.x),C(a.y)},className:"z-50",children:(0,s.jsx)("div",{className:"w-full h-full border-2 border-blue-500 bg-white/40 rounded-md flex items-center justify-center text-sm text-blue-700 font-semibold",children:"Signature"})})]})]}):(0,s.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,s.jsx)("h4",{className:"text-center",children:"Dokumen akan ditampilkan di sini"})})}),(0,s.jsx)("div",{className:"md:col-span-5 col-span-12 px-4",children:(0,s.jsxs)("div",{className:"space-y-4 w-full max-w-sm",children:[(0,s.jsxs)("div",{className:"grid gap-2 mt-3",children:[(0,s.jsx)(d.J,{htmlFor:"signature-desc",children:"Keterangan Tambahan"}),(0,s.jsx)(i.p,{id:"signature-desc",type:"text",placeholder:"Masukkan keterangan tambahan",value:w,onChange:e=>y(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2 mt-3",children:[(0,s.jsx)(d.J,{htmlFor:"signature-reason",children:"Alasan Penandatanganan"}),(0,s.jsx)(i.p,{id:"signature-reason",type:"text",placeholder:"Masukkan alasan penandatanganan",value:S,onChange:e=>k(e.target.value)})]}),(0,s.jsx)(p.$,{onClick:()=>H("sign"),children:R?"Memproses...":"Tandatangani Dokumen"}),(0,s.jsx)(p.$,{className:"ml-3",variant:"destructive",onClick:()=>H("reject"),children:R?"Memproses...":"Tolak Dokumen"})]})})]}),R&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 bg-white p-6 rounded-xl shadow-lg",children:[(0,s.jsx)(x.A,{className:"h-6 w-6 animate-spin text-primary"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Memproses data..."})]})})]})}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,825,767,398,134,474,634,784,475,567,438,251,363,146],()=>r(78088));module.exports=s})();