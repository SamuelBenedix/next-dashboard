(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>s});var r=a(5155);a(2115);var n=a(9708),o=a(2085),i=a(9434);let s=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:o,asChild:l=!1,...c}=e,d=l?n.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,i.cn)(s({variant:a,size:o,className:t})),...c})}},2253:(e,t,a)=>{Promise.resolve().then(a.bind(a,8898))},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4831:(e,t,a)=>{"use strict";a.d(t,{x:()=>i});var r=a(3464);let n="http://192.168.169.23/",o={headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}};class i{async getToken(){let e=localStorage.getItem("jwT_Token");return e?this.parseJwt(e.replace(/"/g,"")):null}parseJwt(e){return JSON.parse(decodeURIComponent(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))}async getIPAddress(e){try{return(await r.A.get("https://api.ipify.org?format=json",e)).data}catch(e){return e}}async loadDraft(e){let t="".concat(n,"SignPlus_DigitalSignatureCertified/api/Signature/LoadDraft?documentId=").concat(e),a={headers:{...o.headers,Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return(await r.A.get(t,a)).data}catch(e){throw console.error("Error uploading file:",e),e}}async getNamedanEmail(e){let t="".concat(n,"SignPlus_UserManagement/api/Account/GetNameEmailLdap/").concat(e);try{return await r.A.get(t,o)}catch(e){throw console.error("Error uploading file:",e),e}}async postLogin(e){try{return(await r.A.post("".concat(n,"SignPlus_UserManagement/api/Account/Login"),e)).data}catch(e){return e}}async getRefreshToken(e){let t={headers:{...o.headers,Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return(await r.A.post("".concat(n,"SignPlus_UserManagement/api/Account/RefreshToken"),e,t)).data}catch(e){return e}}async getListPegawai(){let e={headers:{...o.headers,Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return(await r.A.get("".concat(n,"SignPlus_UserManagement/api/Account/ListPegawai"),e)).data}catch(e){throw console.error("Error uploading file:",e),e}}async getMenu(){let e={headers:{...o.headers,Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return(await r.A.get("".concat(n,"SignPlus_Utility/api/Utility/GetMenu"),e)).data.data.data}catch(e){return[]}}async register(e){try{return(await r.A.post("".concat(n,"SignPlus_UserManagement/api/Account/Register"),e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error uploading file:",e),e}}async uploadFile(e){try{return(await r.A.post("".concat(n,"SignPlus_DigitalSignatureNonCertified/api/NonCertified/upload"),e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error uploading file:",e),e}}async downloadFile(e){try{return(await r.A.post("".concat(n,"SignPlus_DigitalSignatureNonCertified/api/NonCertified/download"),e,{headers:{"Content-Type":"multipart/form-data"},responseType:"blob"})).data}catch(e){throw console.error("Error downloading file:",e),e}}async uploadKTP(e){let t={headers:{Authorization:"Bearer "+localStorage.getItem("jwT_Token"),"Content-Type":"multipart/form-data"}};try{return(await r.A.post("".concat(n,"SignPlus_UserManagement/api/Account/Update"),e,t)).data}catch(e){throw console.error("Error uploading file:",e),e}}async getListDoc(e){let t="";t=e?"".concat(n,"SignPlus_DigitalSignatureCertified/api/Signature/GetUserInbox?status=").concat(e):"".concat(n,"SignPlus_DigitalSignatureCertified/api/Signature/GetUserInbox");let a={headers:{...o.headers,Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return(await r.A.get(t,a)).data}catch(e){throw console.error("Error fetching list doc:",e),e}}async downloadCertified(e){let t={headers:{Authorization:"Bearer "+localStorage.getItem("jwT_Token"),"Content-Type":"application/x-www-form-urlencoded"},responseType:"arraybuffer"};try{return await r.A.post("".concat(n,"SignPlus_DigitalSignatureCertified/api/Signature/DownloadFile"),e,t)}catch(e){throw console.error("Error downloading certified file:",e),e}}async signCertified(e){let t={headers:{Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return await r.A.post("".concat(n,"SignPlus_DigitalSignatureCertified/api/Signature/DigitalSign"),e,t)}catch(e){throw console.error("Error signing certified file:",e),e}}async viewProfile(e){let t={headers:{Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return await r.A.post("".concat(n,"SignPlus_UserManagement/api/Account/View"),e,t)}catch(e){throw console.error("Error viewing profile:",e),e}}async logMonitoring(e){try{return await r.A.post("".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/InsertPage"),e,o)}catch(e){throw console.error("Error logging monitoring:",e),e}}async loginMonitoring(e){let t="".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/Login?typeMonitoring=").concat(e);try{return await r.A.post(t,o)}catch(e){throw console.error("Error login monitoring:",e),e}}async getDetailTTD(e){let t="".concat(n,"SignPlus_DigitalSignatureCertified/api/Signature/GetCertificateData?uniq=").concat(e),a={headers:{...o.headers,Authorization:"Bearer "+localStorage.getItem("jwT_Token")}};try{return(await r.A.get(t,a)).data}catch(e){throw console.error("Error getting detail TTD:",e),e}}async getListPageVisit(e){let t="".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/PageVisit?Page=").concat(e.page,"&PageSize=").concat(e.pageSize);try{return await r.A.get(t,o)}catch(e){throw console.error("Error getting list page visit:",e),e}}async getDocumentUploadDownload(e){let t="".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/Document?typeMonitoring=").concat(e);try{return await r.A.get(t,o)}catch(e){throw console.error("Error getting document upload/download:",e),e}}async getBrowserData(){try{return await r.A.get("".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/Browser"),o)}catch(e){throw console.error("Error getting browser data:",e),e}}async getOperatingSystemData(){try{return await r.A.get("".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/OperatingSystem"),o)}catch(e){throw console.error("Error getting OS data:",e),e}}async getOSData(e){let t="".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/OS?typeMonitoring=").concat(e);try{return await r.A.post(t,o)}catch(e){throw console.error("Error uploading file:",e),e}}async getUserData(){try{return await r.A.get("".concat(n,"SignPlus_Monitoring/api/MonitoringSystem/User"),o)}catch(e){throw console.error("Error getting user data:",e),e}}async verifyFile(e){try{return(await r.A.post("".concat(n,"SignPlus_DigitalSignatureCertified/api/Signature/VerifySignature"),e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error uploading file:",e),e}}}new i},8382:(e,t,a)=>{"use strict";a.d(t,{CG:()=>l,Fm:()=>u,Qs:()=>p,cj:()=>s,h:()=>g,qp:()=>h});var r=a(5155);a(2115);var n=a(5452),o=a(4416),i=a(9434);function s(e){let{...t}=e;return(0,r.jsx)(n.bL,{"data-slot":"sheet",...t})}function l(e){let{...t}=e;return(0,r.jsx)(n.l9,{"data-slot":"sheet-trigger",...t})}function c(e){let{...t}=e;return(0,r.jsx)(n.ZL,{"data-slot":"sheet-portal",...t})}function d(e){let{className:t,...a}=e;return(0,r.jsx)(n.hJ,{"data-slot":"sheet-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function g(e){let{className:t,children:a,side:s="right",...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(n.UC,{"data-slot":"sheet-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===s&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===s&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===s&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===s&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...l,children:[a,(0,r.jsxs)(n.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,r.jsx)(o.A,{className:"size-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"sheet-header",className:(0,i.cn)("flex flex-col gap-1.5 p-4",t),...a})}function h(e){let{className:t,...a}=e;return(0,r.jsx)(n.hE,{"data-slot":"sheet-title",className:(0,i.cn)("text-foreground font-semibold",t),...a})}function p(e){let{className:t,...a}=e;return(0,r.jsx)(n.VY,{"data-slot":"sheet-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...a})}},8898:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var r=a(5155),n=a(2115),o=a(5028),i=a(285),s=a(5617),l=a(9946);let c=(0,l.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),d=(0,l.A)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var g=a(9869);a(8851),a(2465);var u=a(4123),h=a(4831);async function p(e){return new Promise((t,a)=>{let r=document.createElement("canvas"),n=r.getContext("2d"),o=new Image;o.crossOrigin="Anonymous",o.src=e,o.onload=()=>{r.width=o.width,r.height=o.height,null==n||n.drawImage(o,0,0),t(r.toDataURL("image/png"))},o.onerror=()=>{a(Error("Gagal memuat gambar"))}})}async function m(e){let{imageUrl:t,x:a,y:r,pdfBytes:n,selectedPage:o,width:i=100,height:s=50}=e,l=await u.PDFDocument.load(n),c=l.getPages()[o-1];if(!c)throw Error("Page ".concat(o," not found in PDF"));t.endsWith(".png")||(t=await p(t));let d=await fetch(t).then(e=>e.arrayBuffer()),g=await l.embedPng(d),h=a,m=r;return i>60||s>60?m=r-s+47:i<60||s<60?m=r-(s-45):(m=r-18,h=a+3),c.drawImage(g,{x:h,y:m,width:i,height:s}),await l.save()}let f=new h.x;async function w(e){let{signatureDataURL:t,x:a,y:r,pdfBytes:n,selectedPage:o,width:i=100,height:s=50}=e;try{let e=await u.PDFDocument.load(n),l=e.getPages()[o-1],c=await e.embedPng(t),d=await y(n instanceof ArrayBuffer?n:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength));return console.log("Signature:",t),console.log("x:",a,"y:",r,"width:",i,"height:",s),console.log("Original orientation:",d),l.drawImage(c,{x:a,y:r,width:i,height:s}),await e.save()}catch(e){throw console.error("Error adding signature to PDF:",e),e}}async function y(e){return(1&new Uint8Array(e.slice(17,18))[0])==0?"Potrait":"Landscape"}async function x(e){let t=new Blob([e],{type:"application/pdf"}),a=new FormData;a.append("file",t,"pdf-with-signature.pdf");try{return await f.uploadFile(a)}catch(e){throw console.error("Upload error:",e),e}}let b=async e=>{let{documentURL:t,capturedSignature:a,selectedImageUrl:r,currentPage:n,xCoordinate:o,yCoordinate:i,pdfPaperWidth:s,pdfPaperHeight:l,scale:c,fileBytesOverride:d,width:g,height:u}=e;if(!t)return void console.error("documentURL is empty");let h=null!=d?d:await fetch(t).then(e=>e.arrayBuffer()),p=i,f=o;if(a){try{let e=await w({signatureDataURL:a,x:f,y:p,pdfBytes:h,selectedPage:n,width:g,height:u}),t=await x(e);t&&"object"==typeof t&&"object"in t&&t.object&&"object"==typeof t.object&&"id"in t.object&&localStorage.setItem("IdUpload",t.object.id)}catch(e){console.error("Error uploading signature file:",e)}return}if(r){let e=l/3,t=s/3;c>1&&(i<=e?p-=15:i<=2*e?p-=10:p-=3,f+=o<=t?3:o<=2*t?10:15);try{let e=await m({imageUrl:r,x:f,y:p,pdfBytes:h,selectedPage:n,width:g,height:u}),t=await x(e);t&&"object"==typeof t&&"object"in t&&t.object&&"object"==typeof t.object&&"id"in t.object&&localStorage.setItem("IdUpload",t.object.id)}catch(e){console.error("Error uploading image file:",e)}return}alert("Please capture a signature or select an image preview first.")},v=(0,l.A)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),j=(0,l.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var S=a(8382),k=a(5695);function A(){let[e,t]=(0,n.useState)(!1),a=(0,k.useRouter)();return(0,r.jsx)("header",{className:"w-full px-4 py-3 shadow-sm border-b bg-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"/BNI_logo.svg",alt:"e-Signature Logo",className:"h-8"})}),(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsx)(i.$,{variant:"outline",className:"text-sm",onClick:()=>a.push("/login"),children:"Login"})}),(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsxs)(S.cj,{open:e,onOpenChange:t,children:[(0,r.jsx)(S.CG,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"ghost",size:"icon",children:(0,r.jsx)(j,{className:"w-5 h-5"})})}),(0,r.jsx)(S.h,{side:"right",className:"w-64",children:(0,r.jsx)("div",{className:"mt-4 space-y-4",children:(0,r.jsx)(i.$,{variant:"outline",className:"text-sm",onClick:()=>a.push("/login"),children:"Login"})})})]})})]})})}let P=new h.x,C=(0,o.default)(()=>Promise.all([a.e(592),a.e(464),a.e(195)]).then(a.bind(a,4360)),{loadableGenerated:{webpack:()=>[4360]},ssr:!1});function N(){let[e,t]=(0,n.useState)(null),[a,o]=(0,n.useState)(null),[l,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(null),[m,f]=(0,n.useState)({x:0,y:0}),[w,y]=(0,n.useState)({w:100,h:50}),[x,j]=(0,n.useState)(!1),S=(0,n.useRef)(null),k=(0,n.useRef)(null),[N,T]=(0,n.useState)(0),[_,D]=(0,n.useState)({width:0,height:0}),[M,E]=(0,n.useState)({width:0,height:0}),[U,L]=(0,n.useState)(0),[z,I]=(0,n.useState)(0),[B,R]=(0,n.useState)(!1);console.log("pdfRenderedSize",_),console.log("pdfOriginalSize",M);let F=async e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(!r)return;let n=URL.createObjectURL(r);u(n),localStorage.setItem("documentURL",n);let i=await r.arrayBuffer(),s=new Uint8Array(i.byteLength);if(s.set(new Uint8Array(i)),o(s),!r||"application/pdf"!==r.type)return void alert("Mohon unggah file PDF!");t(await r.arrayBuffer()),p(null)},O=async e=>{let t=localStorage.getItem("IdUpload"),a=new Date,r="".concat(a.getDate()).concat(a.getMonth()+1).concat(a.getFullYear());try{let a=await P.downloadFile({FileId:t}),n=new Blob([a],{type:"application/pdf"}),o=window.URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download="".concat(r,"_BNI_SignatureNonCertificate.pdf"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o),e(100)}catch(e){throw console.error("Error downloading file:",e),e}},$=async()=>{if(!a||!h)return void alert("Upload PDF dan tanda tangan terlebih dahulu!");R(!0);try{let e=m.x,t=_.height-m.y-w.h-250,r=w.w,n=w.h-20;console.log("width",r),console.log("height",n),await b({documentURL:l,capturedSignature:h,selectedImageUrl:"",currentPage:U+1,xCoordinate:e,yCoordinate:t,pdfPaperWidth:_.width,pdfPaperHeight:_.height,scale:1,fileBytesOverride:a,width:r,height:n}),await O(T),alert("Berhasil mengunggah PDF yang telah dimodifikasi.")}catch(e){console.error("Error uploading PDF:",e),alert("Gagal mengunggah PDF")}finally{R(!1)}};return console.log("progress",N),(0,r.jsxs)("div",{children:[(0,r.jsx)(A,{}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-6 py-12",children:[(0,r.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold text-teal-800 flex items-center gap-2",children:["Tanda Tangan Elektronik",(0,r.jsx)(c,{className:"w-6 h-6"})]}),(0,r.jsx)("input",{ref:k,id:"pdf-upload",type:"file",accept:"application/pdf",className:"hidden",onChange:F}),(0,r.jsxs)(i.$,{onClick:()=>{var e;null==(e=k.current)||e.click()},className:"bg-teal-800 hover:bg-teal-700 text-white text-base px-6 py-2 rounded-md shadow-md flex items-center gap-2",children:["Upload File",(0,r.jsx)(d,{className:"w-5 h-5"})]}),(0,r.jsx)("div",{className:"p-6 max-w-4xl mx-auto space-y-4",children:e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("select",{className:"p-2 border rounded",onChange:e=>L(+e.target.value),value:U,children:Array.from({length:z},(e,t)=>(0,r.jsxs)("option",{value:t,children:["Halaman ",t+1]},t))}),(0,r.jsxs)("label",{className:"cursor-pointer flex items-center gap-2 p-2 border rounded hover:bg-gray-100",children:[(0,r.jsx)(g.A,{className:"w-5 h-5"}),(0,r.jsx)("input",{type:"file",accept:"image/png, image/jpeg",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a&&a.size<=2097152){let e=new FileReader;e.onload=()=>p(e.result),e.readAsDataURL(a)}else alert("Maksimal ukuran gambar adalah 2MB.")},className:"hidden"})]}),(0,r.jsx)(i.$,{type:"button",variant:"outline",className:"p-2",title:"Tanda Tangan Manual",onClick:()=>j(!0),children:(0,r.jsx)(v,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"relative border",style:{width:"fit-content"},children:[(0,r.jsx)(C,{fileBuffer:e,currentPage:U,onLoad:e=>I(e),onPageSize:e=>{console.log("size",e),D(e)},onRenderScaleChange:(e,t,a)=>{console.log("pdf w",t),console.log("pdf h",a),E({width:t,height:a})},signatureURL:h,position:m,sigSize:w}),h&&(0,r.jsx)(s.p,{size:{width:w.w,height:w.h},position:{x:m.x,y:m.y},onDragStop:(e,t)=>{f({x:t.x,y:t.y})},onResizeStop:(e,t,a)=>{console.log("ref.style.",a.style),y({w:parseFloat(a.style.width),h:parseFloat(a.style.height)})},bounds:"parent",lockAspectRatio:!0,style:{zIndex:10,border:"2px dashed #3b82f6",borderRadius:"4px"},children:(0,r.jsx)("img",{src:h,alt:"signature",className:"w-full h-full object-contain",style:{pointerEvents:"none",userSelect:"none"}})})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(i.$,{variant:"secondary",onClick:()=>p(null),disabled:!h,children:"Hapus Tanda Tangan"}),(0,r.jsx)(i.$,{onClick:$,disabled:B,children:B?"Mengekspor...":"Ekspor PDF Bertanda Tangan"})]}),x&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg w-[500px] max-w-full",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Buat Tanda Tangan"}),(0,r.jsx)("canvas",{ref:S,width:400,height:200,className:"border border-gray-300 rounded cursor-crosshair",onMouseDown:e=>{let t=S.current;if(!t)return;let a=t.getContext("2d");if(!a)return;a.beginPath();let r=t.getBoundingClientRect();a.moveTo(e.clientX-r.left,e.clientY-r.top);let n=e=>{a.lineTo(e.clientX-r.left,e.clientY-r.top),a.stroke()},o=()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",o)}}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,r.jsx)(i.$,{variant:"ghost",onClick:()=>{let e=S.current;if(!e)return;let t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)},children:"Clear"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.$,{variant:"secondary",onClick:()=>j(!1),children:"Batal"}),(0,r.jsx)(i.$,{onClick:()=>{let e=S.current;e&&(p(e.toDataURL("image/png")),j(!1))},children:"Gunakan Tanda Tangan"})]})]})]})})]})})]})]})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o});var r=a(2596),n=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[825,352,134,452,794,246,815,441,684,358],()=>t(2253)),_N_E=e.O()}]);